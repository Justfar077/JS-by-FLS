<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="./css/reset.css">
	<link rel="stylesheet" href="./css/style.css">
	<link rel="shortcut icon" href="./img/favicon.ico">
	<title>Task 4</title>
</head>
<body>
	<div class="main">
		<div class="main__header">
			<div class="main__title">Задача № 4</div>
		</div>
		<div class="main__exercise exercise">
			<p class="exercise__description">
				Задача. Створити клас TBankomat, який моделює роботу банкомата. 
				Клас повинен містити поля для зберігання кількості купюр кожного із 
				номіналів від 5 до 200 гривень. Реалізувати методи знаходження максимальної 
				та мінімальної сум, які може видати банкомат, та метод зняття деякої суми.
			</p>
			<p class="exercise__result">
				<script>
					"use strict"



class Banknotes {
   #faceValue
   #amount
   constructor(faceValue, amount) {
		this.FaceValue = faceValue
		this.Amount = amount
   }

	get FaceValue() {
		return this.#faceValue
	}

	set FaceValue(value) {
		switch (value) {
			case 5:
				this.faceValue = value
         case 10:
            this.faceValue = value
         case 20:
            this.faceValue = value
			case 50:
            this.faceValue = value
         case 100:
            this.faceValue = value
         case 200:
            this.faceValue = value
            break
         default:
            throw new Error('Некоректний номінал')
         }
      }

   get Amount() {
      return this.#amount
   }

   set Amount(value) {
      if (value < 1)
         throw new Error('Некоректна кількіть купюр')
      this.#amount = value
   }
}

class TBankomat {
		constructor(banknotes) {
		this.banknotes = banknotes
   }

   getMinSum() {
      let minValue = 5
      for (let i = 0; i < this.banknotes.length; i++) {
			if (this.banknotes[i].faceValue >= minValue) {
				minValue = this.banknotes[i].faceValue
				return minValue
			}
		}
		return 'На рахунку немає коштів'
   }

   getMaxSum() {
      let availableSum = this.banknotes.reduce(
      	(prevSum, sum) => prevSum + sum.faceValue * sum.Amount,0)
		return availableSum
   }

   withdrawMoney(money) {
		let minValue = 5
      let balance = this.getMaxSum()
         if (balance >= money && money >= minValue) {
            balance -= money
            return balance
			} else throw new Error('Недостатньо коштів на рахунку або замала сума')
      }

   toString() {
      return `${this.getMaxSum()}`
   }
}

let banknotes = [
   new Banknotes(5, 100),
   new Banknotes(10, 100),
   new Banknotes(20, 100),
   new Banknotes(50, 100),
   new Banknotes(100, 100),
   new Banknotes(200, 100),
]

let ATM = new TBankomat(banknotes)
let userWithdraw = parseInt(prompt('Введіть суму яку хочете зняти з рахунку'))
document.write(`
   Баланс рахунку до зняття = ${ATM}<br>
   Баланс після зняття = ${ATM.withdrawMoney(userWithdraw)}<br>
   Мінімальна сума для зняття = ${ATM.getMinSum()}`)

				</script>
			</p>
		</div>
		<div class="main__link-block">
			<a class="main__link" href="index.html">Home</a>
		</div>
	</div>
</body>
</html>